{"ast":null,"code":"import React,{useState,useEffect}from'react';import{getAllUsers,createUser,updateUser,deleteUser}from'../../services/userService';import AddUserModal from'./AddUserModal';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserManagement=()=>{const[users,setUsers]=useState([]);const[loading,setLoading]=useState(true);const[showAddModal,setShowAddModal]=useState(false);const[editingUser,setEditingUser]=useState(null);const[error,setError]=useState('');const[success,setSuccess]=useState('');useEffect(()=>{fetchUsers();},[]);const fetchUsers=async()=>{try{const data=await getAllUsers();setUsers(data);setError('');}catch(error){console.error('Error fetching users:',error);setError('Failed to fetch users: '+error.message);}finally{setLoading(false);}};const handleAddUser=async userData=>{try{await createUser(userData);setSuccess('User created successfully!');setError('');fetchUsers();setShowAddModal(false);setTimeout(()=>setSuccess(''),3000);}catch(error){console.error('Error adding user:',error);setError('Failed to create user: '+error.message);}};const handleDeleteUser=async userId=>{if(window.confirm('Are you sure you want to delete this user?')){try{await deleteUser(userId);setSuccess('User deleted successfully!');setError('');fetchUsers();setTimeout(()=>setSuccess(''),3000);}catch(error){console.error('Error deleting user:',error);setError('Failed to delete user: '+error.message);}}};const handleUpdateRole=async(userId,newRole)=>{try{await updateUser(userId,{role:newRole});setSuccess('User role updated successfully!');setError('');fetchUsers();setTimeout(()=>setSuccess(''),3000);}catch(error){console.error('Error updating user role:',error);setError('Failed to update user role: '+error.message);}};const testConnection=async()=>{try{const response=await fetch('http://localhost:8080/api/admin/users',{headers:{'Authorization':\"Bearer \".concat(localStorage.getItem('accessToken')),'Content-Type':'application/json'}});console.log('Test response status:',response.status);const data=await response.text();console.log('Test response data:',data);setSuccess('Connection test completed - check console');}catch(error){console.error('Connection test failed:',error);setError('Connection test failed: '+error.message);}};if(loading)return/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading users...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"user-management\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"user-management-header\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"User Management\"}),/*#__PURE__*/_jsx(\"button\",{className:\"add-user-btn\",onClick:()=>setShowAddModal(true),children:\"Add User\"})]}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),success&&/*#__PURE__*/_jsx(\"div\",{className:\"success-message\",children:success}),/*#__PURE__*/_jsx(\"div\",{className:\"users-table\",children:/*#__PURE__*/_jsxs(\"table\",{children:[/*#__PURE__*/_jsx(\"thead\",{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"Username\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Location\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Experience\"}),/*#__PURE__*/_jsx(\"th\",{children:\"Actions\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:users.map(user=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:user.username}),/*#__PURE__*/_jsx(\"td\",{children:user.email}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsxs(\"select\",{value:user.role,onChange:e=>handleUpdateRole(user.id,e.target.value),children:[/*#__PURE__*/_jsx(\"option\",{value:\"ADMIN\",children:\"ADMIN\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PLANT_CARE_SPECIALIST\",children:\"PLANT_CARE_SPECIALIST\"}),/*#__PURE__*/_jsx(\"option\",{value:\"PREMIUM_PLANT_OWNER\",children:\"PREMIUM_PLANT_OWNER\"}),/*#__PURE__*/_jsx(\"option\",{value:\"STANDARD_PLANT_OWNER\",children:\"STANDARD_PLANT_OWNER\"}),/*#__PURE__*/_jsx(\"option\",{value:\"COMMUNITY_MEMBER\",children:\"COMMUNITY_MEMBER\"}),/*#__PURE__*/_jsx(\"option\",{value:\"GUEST\",children:\"GUEST\"})]})}),/*#__PURE__*/_jsx(\"td\",{children:user.location||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:user.gardeningExperience||'N/A'}),/*#__PURE__*/_jsx(\"td\",{children:/*#__PURE__*/_jsx(\"button\",{className:\"delete-btn\",onClick:()=>handleDeleteUser(user.id),children:\"Delete\"})})]},user.id))})]})}),showAddModal&&/*#__PURE__*/_jsx(AddUserModal,{onClose:()=>setShowAddModal(false),onSubmit:handleAddUser})]});};export default UserManagement;","map":{"version":3,"names":["React","useState","useEffect","getAllUsers","createUser","updateUser","deleteUser","AddUserModal","jsx","_jsx","jsxs","_jsxs","UserManagement","users","setUsers","loading","setLoading","showAddModal","setShowAddModal","editingUser","setEditingUser","error","setError","success","setSuccess","fetchUsers","data","console","message","handleAddUser","userData","setTimeout","handleDeleteUser","userId","window","confirm","handleUpdateRole","newRole","role","testConnection","response","fetch","headers","concat","localStorage","getItem","log","status","text","className","children","onClick","map","user","username","email","value","onChange","e","id","target","location","gardeningExperience","onClose","onSubmit"],"sources":["C:/Users/Dell/Desktop/project/frontend/Plant-Care-Scheduler-Frontend/src/components/admin/UserManagement.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { getAllUsers, createUser, updateUser, deleteUser } from '../../services/userService';\nimport AddUserModal from './AddUserModal';\n\nconst UserManagement = () => {\n  const [users, setUsers] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [showAddModal, setShowAddModal] = useState(false);\n  const [editingUser, setEditingUser] = useState(null);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState('');\n\n  useEffect(() => {\n    fetchUsers();\n  }, []);\n\n  const fetchUsers = async () => {\n    try {\n      const data = await getAllUsers();\n      setUsers(data);\n      setError('');\n    } catch (error) {\n      console.error('Error fetching users:', error);\n      setError('Failed to fetch users: ' + error.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleAddUser = async (userData) => {\n    try {\n      await createUser(userData);\n      setSuccess('User created successfully!');\n      setError('');\n      fetchUsers();\n      setShowAddModal(false);\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (error) {\n      console.error('Error adding user:', error);\n      setError('Failed to create user: ' + error.message);\n    }\n  };\n\n  const handleDeleteUser = async (userId) => {\n    if (window.confirm('Are you sure you want to delete this user?')) {\n      try {\n        await deleteUser(userId);\n        setSuccess('User deleted successfully!');\n        setError('');\n        fetchUsers();\n        setTimeout(() => setSuccess(''), 3000);\n      } catch (error) {\n        console.error('Error deleting user:', error);\n        setError('Failed to delete user: ' + error.message);\n      }\n    }\n  };\n\n  const handleUpdateRole = async (userId, newRole) => {\n    try {\n      await updateUser(userId, { role: newRole });\n      setSuccess('User role updated successfully!');\n      setError('');\n      fetchUsers();\n      setTimeout(() => setSuccess(''), 3000);\n    } catch (error) {\n      console.error('Error updating user role:', error);\n      setError('Failed to update user role: ' + error.message);\n    }\n  };\n\n  const testConnection = async () => {\n    try {\n      const response = await fetch('http://localhost:8080/api/admin/users', {\n        headers: {\n          'Authorization': `Bearer ${localStorage.getItem('accessToken')}`,\n          'Content-Type': 'application/json'\n        }\n      });\n      console.log('Test response status:', response.status);\n      const data = await response.text();\n      console.log('Test response data:', data);\n      setSuccess('Connection test completed - check console');\n    } catch (error) {\n      console.error('Connection test failed:', error);\n      setError('Connection test failed: ' + error.message);\n    }\n  };\n\n  if (loading) return <div className=\"loading\">Loading users...</div>;\n\n  return (\n    <div className=\"user-management\">\n      <div className=\"user-management-header\">\n        <h2>User Management</h2>\n        <button \n          className=\"add-user-btn\"\n          onClick={() => setShowAddModal(true)}\n        >\n          Add User\n        </button>\n        \n        \n      </div>\n\n      {error && <div className=\"error-message\">{error}</div>}\n      {success && <div className=\"success-message\">{success}</div>}\n\n      <div className=\"users-table\">\n        <table>\n          <thead>\n            <tr>\n              <th>Username</th>\n              <th>Email</th>\n              <th>Role</th>\n              <th>Location</th>\n              <th>Experience</th>\n              <th>Actions</th>\n            </tr>\n          </thead>\n          <tbody>\n            {users.map(user => (\n              <tr key={user.id}>\n                <td>{user.username}</td>\n                <td>{user.email}</td>\n                <td>\n                  <select \n                    value={user.role} \n                    onChange={(e) => handleUpdateRole(user.id, e.target.value)}\n                  >\n                    <option value=\"ADMIN\">ADMIN</option>\n                    <option value=\"PLANT_CARE_SPECIALIST\">PLANT_CARE_SPECIALIST</option>\n                    <option value=\"PREMIUM_PLANT_OWNER\">PREMIUM_PLANT_OWNER</option>\n                    <option value=\"STANDARD_PLANT_OWNER\">STANDARD_PLANT_OWNER</option>\n                    <option value=\"COMMUNITY_MEMBER\">COMMUNITY_MEMBER</option>\n                    <option value=\"GUEST\">GUEST</option>\n                  </select>\n                </td>\n                <td>{user.location || 'N/A'}</td>\n                <td>{user.gardeningExperience || 'N/A'}</td>\n                <td>\n                  <button \n                    className=\"delete-btn\"\n                    onClick={() => handleDeleteUser(user.id)}\n                  >\n                    Delete\n                  </button>\n                </td>\n              </tr>\n            ))}\n          </tbody>\n        </table>\n      </div>\n\n      {showAddModal && (\n        <AddUserModal \n          onClose={() => setShowAddModal(false)}\n          onSubmit={handleAddUser}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default UserManagement;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}